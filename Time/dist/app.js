window.onload=function(){function g(j){var l=document.getElementsByClassName("active")[0];var m=document.getElementById(j);var k=document.getElementById("dialog");k.style.opacity="0";setTimeout(function(){m.classList.add("active");l.classList.remove("active");k.style.opacity="1"},250)}var a=[0,0,0,0,0].map(function(){return"<svg viewBox='0 0 94 90'><polygon points='47,0 76,90 0,34 94,34 17,90'></polygon></svg>"}).join("");function d(l){var k=document.createElement(l[0]);if(l[1]){for(var j in l[1]){k.setAttribute(j,l[1][j])}}if(typeof(l[2])=="string"){k.innerHTML=l[2]}else{if(l[2]){l[2].forEach(function(m){k.appendChild(d(m))})}}return k}function c(k,j){while(k&&k.tagName!=j){k=k.parentElement}return k}function f(n,p,j){var m=e(n);if(m.time<p){return}localStorage.setItem("score-level-"+n,JSON.stringify({time:p,stars:j}));var k=document.querySelector("tr[data-id="+n+"]");var l=k.children[1];l.className="stars star-"+j;var o=k.children[2];o.innerHTML=h(p)}function h(j){if(j==Infinity){return"---"}return j.toFixed(2)+"s"}function e(j){return JSON.parse(localStorage.getItem("score-level-"+j))||{stars:null,time:Infinity}}var i=new Time.GameView(document.getElementById("canvas"));i.start();i.gameOverCallback=function(){document.getElementById("shadow").style.visibility="visible";document.getElementById("shadow").style.opacity="1"};document.getElementById("btnStart").addEventListener("click",function(){g("level-selection")});var b=document.getElementById("levels-list").children[0];Time.getLevels().map(function(k){var j=e(k.id);return d(["tr",{"data-id":k.id},[["td",{},k.name],["td",{"class":"stars star-"+j.stars},a],["td",{},h(j.time)]]])}).forEach(function(j){b.appendChild(j)});b.addEventListener("click",function(j){var k=c(j.target,"TR");if(!k){return}var l=k.attributes["data-id"].value;document.getElementById("shadow").style.opacity="0";i.stop();setTimeout(function(){i.setLevel(l);i.start();document.getElementById("shadow").style.visibility="hidden"},500)})};